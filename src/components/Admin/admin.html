<!-- MyMusic view -->
<header ng-include="'app/views/Header/header.html'" class="g-header" ng-controller="HeaderCtrl"></header>
<div class="g-body">
    <div id="g-admin" class="g-container container clearfix" ng-controller="AdminCtrl">
        <div class="g-menu sidebar-nav navbar-collapse collapse pull-left" data-ng-init="loadMenus()">
            <show-admin-menu menus="adminMenus" pages="pages"></show-admin-menu>
        </div>
        <div class="g-content pull-left" ng-include="pages.pageUrl" autoscroll></div>
    </div>
</div>
<footer ng-include="'app/views/Templates/footer.html'" class="g-footer"></footer>

<!-- userInfo.html -->
<script type="text/ng-template" id="userInfo.html">
    <div class="userInfo" ng-controller="InfoCtrl">
        <div class="user-info">
            <div class="base-info clearfix">
            <span class="username">
                {{userInfo.username}}
                <i class="fa" ng-if="userInfo.sex != 0" ng-class="{1: 'fa-mars', 2: 'fa-venus'}[userInfo.sex]"></i>
            </span>
                <a href="/#/admin?page=editInfo" type="button" class="btn btn-info btn-sm pull-right">编辑个人资料</a>
            </div>
            <div class="other-info">
                <p class="info">个人介绍：{{userInfo.info}}</p>
                <p><span class="area">所在地区：{{userInfo.areaName.province}} {{userInfo.areaName.city}} {{userInfo.areaName.district}}</span>
                    <span class="birth">生日：{{userInfo.birth}}</span></p>
            </div>
        </div>
        <div class="list">
            <nav class="list-title">听歌排行</nav>
        </div>
    </div>
</script>
<!-- editInfo.html -->
<script type="text/ng-template" id="editInfo.html">
    <div class="editInfo" ng-controller="InfoCtrl">
        <nav class="edit-info-title">编辑个人资料</nav>
        <form class="form-horizontal clearfix">
            <div class="form-group clearfix username">
                <label for="username" class="pull-left">昵称：</label>
                <div class="input-group pull-left">
                    <div class="input-group-addon"><i class="fa fa-user"></i></div>
                    <input type="text" class="form-control" id="username" placeholder="昵称" ng-model="userInfo.username">
                </div>
            </div>
            <div class="form-group sex">
                <label>性别：</label>
                <span class="sex-radio">
                    <label class="radio-inline">
                        <input type="radio" name="sexRadio" id="sex-mars" value="1"
                               ng-model="userInfo.sex" ng-checked="userInfo.sex == 1"> 男
                    </label>
                    <label class="radio-inline">
                        <input type="radio" name="sexRadio" id="sex-venus" value="2"
                               ng-model="userInfo.sex" ng-checked="userInfo.sex == 2"> 女
                    </label>
                    <label class="radio-inline">
                        <input type="radio" name="sexRadio" id="sex-secret" value="0"
                               ng-model="userInfo.sex" ng-checked="userInfo.sex == 0"> 保密
                    </label>
                </span>
            </div>
            <date-picker date="userInfo.birth" label="生日"></date-picker>
            <city-select code="userInfo.code"></city-select>
            <div class="form-group">
                <label for="info">个人简介：</label>
                <div>
                <textarea id="info" class="form-control" rows="6" cols="40" name="info"
                          placeholder="个人简介" ng-model="userInfo.info"></textarea>
                </div>
            </div>
            <button class="btn btn-primary" ng-click="updateUserInfo()">更新</button>
        </form>
    </div>
</script>

<!-- singers.html -->
<script type="text/ng-template" id="singers.html">
    <div class="singers" ng-controller="SingerCtrl">
        <ol class="breadcrumb">
            <li ng-repeat="breadcrumb in breadcrumbs" ng-class="{active: $last}">
                <a href="{{breadcrumb.href}}" ng-if="breadcrumb.href">{{breadcrumb.name}}</a>
                <span ng-if="$last">{{breadcrumb.name}}</span>
            </li>
        </ol>
        <div class="singers-container clearfix" ng-include="subPageUrl" autoscroll></div>
    </div>
</script>
<!--歌手列表模板 singerList.html-->
<script type="text/ng-template" id="singerList.html">
    <div class="clearfix edit-bars">
        <form class="navbar-form pull-left m-search" role="search">
            <div class="form-group">
                <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
                <input type="text" class="form-control" placeholder="查找歌手" ng-keypress="search($event)">
            </div>
        </form>
        <button class="btn btn-danger btn-sm pull-right" ng-click="deleteSinger()">删除选中的歌手</button>
        <a href="#/admin?page=singers&subPage=singerHandle" class="btn btn-info btn-sm pull-right" role="button">添加歌手</a>
    </div>
    <div class="item-table" ng-controller="PageTableCtrl">
        <table id="singer-table" class="table table-condensed table-striped table-hover"
               ng-init="getSingers(pagination.currPage, pagination.itemsPerPage)">
            <thead>
                <tr>
                    <th>
                        <input type="checkbox" ng-click="toggleSelectAll('singer-table')" ng-checked="isSelectAllModel">
                    </th>
                    <th>序号</th>
                    <th>歌手名</th>
                    <th>分类</th>
                    <th>语种</th>
                    <th>歌手简介</th>
                    <th>操作</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="singer in singers">
                    <td>
                        <input type="checkbox" name="item-check" ng-click="toggleSelect($event, singer.id)">
                    </td>
                    <td>{{(pagination.currPage-1)*pagination.itemsPerPage + $index + 1}}</td>
                    <td class="name-td" ng-click="goToSingerPage(singer.id)">{{singer.singer_name}}</td>
                    <td>{{singer.singer_type_text}}</td>
                    <td>{{singer.language_text}}</td>
                    <td>{{singer.singer_info}}</td>
                    <td>
                        <a href="#/admin?page=singers&subPage=singerHandle&singerId={{singer.id}}"><i class="fa fa-edit"></i></a>
                        <i class="fa fa-trash" ng-click="deleteSinger(singer.id)"></i>
                    </td>
                </tr>
            </tbody>
        </table>
        <uib-pagination ng-if="pagination.totalItems>0" total-items="pagination.totalItems" ng-model="pagination.currPage"
                        max-size="pagination.maxSize" items-per-page="pagination.itemsPerPage" class="pagination-sm pull-right"
                        previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"
                        boundary-links="true" force-ellipses="true" ng-change="pageChanged(getSingers)"></uib-pagination>
    </div>
</script>
<!--添加歌手模板 singerHandle.html-->
<script type="text/ng-template" id="singerHandle.html">
    <form class="form-horizontal clearfix singerHandle" data-ng-init="singerHandle()">
        <div class="form-group clearfix singerName">
            <label for="singer-name" class="pull-left">歌手：</label>
            <div class="input-group pull-left">
                <div class="input-group-addon"><i class="fa fa-user"></i></div>
                <input type="text" class="form-control" id="singer-name" placeholder="歌手" ng-model="singerInfo.singer_name">
            </div>
        </div>
        <div class="form-group singer-type-select">
            <label class="pull-left">歌手分类：</label>
            <div class="input-group">
                <select class="form-control" ng-model="singerInfo.singer_type"
                        ng-options="singerType.id as singerType.text for singerType in singerTypes">' +
                    <option value="">-- 选择分类 --</option>
                </select>
            </div>
        </div>
        <div class="form-group language-select">
            <label class="pull-left">歌手语种：</label>
            <div class="input-group">
                <select class="form-control" ng-model="singerInfo.language"
                        ng-options="language.id as language.text for language in languages">' +
                    <option value="">-- 选择语种 --</option>
                </select>
            </div>
        </div>
        <div class="form-group">
            <label for="singer-info">歌手简介：</label>
            <div>
                <textarea id="singer-info" class="form-control" rows="6" cols="40" name="singer-info"
                          placeholder="歌手简介" ng-model="singerInfo.singer_info"></textarea>
            </div>
        </div>
        <button class="btn btn-primary" ng-click="saveSingerInfo()">保存</button>
    </form>
</script>

<!-- albums.html -->
<script type="text/ng-template" id="albums.html">
    <div class="albums" ng-controller="AlbumCtrl">
        <ol class="breadcrumb">
            <li ng-repeat="breadcrumb in breadcrumbs" ng-class="{active: $last}">
                <a href="{{breadcrumb.href}}" ng-if="breadcrumb.href">{{breadcrumb.name}}</a>
                <span ng-if="$last">{{breadcrumb.name}}</span>
            </li>
        </ol>
        <div class="albums-container clearfix" ng-include="subPageUrl" autoscroll></div>
    </div>
</script>
<!--专辑列表模板 albumList.html-->
<script type="text/ng-template" id="albumList.html">
    <div class="clearfix edit-bars">
        <form class="navbar-form pull-left m-search" role="search">
            <div class="form-group">
                <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
                <input type="text" class="form-control" placeholder="查找专辑" ng-keypress="search($event)">
            </div>
        </form>
        <button class="btn btn-danger btn-sm pull-right" ng-click="deleteAlumsById()">删除选中的专辑</button>
        <a href="/#/admin?page=albums&subPage=albumHandle" class="btn btn-info btn-sm pull-right" role="button">添加专辑</a>
    </div>
    <div class="item-table" ng-controller="PageTableCtrl">
        <table id="album-table" class="table table-condensed table-striped table-hover"
               ng-init="getAlbums(pagination.currPage, pagination.itemsPerPage)">
            <thead>
                <tr>
                    <th>
                        <input type="checkbox" ng-click="toggleSelectAll('album-table')" ng-checked="isSelectAllModel">
                    </th>
                    <th>序号</th>
                    <th>专辑名</th>
                    <th>专辑简介</th>
                    <th>出版日期</th>
                    <th>所属歌手</th>
                    <th>操作</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="album in albums">
                    <td>
                        <input type="checkbox" name="item-check" ng-click="toggleSelect($event, album.id)">
                    </td>
                    <td>{{(pagination.currPage-1)*pagination.itemsPerPage + $index + 1}}</td>
                    <td class="name-td" ng-click="goToAlbumPage(album.id)">{{album.album_name}}</td>
                    <td>{{album.album_info}}</td>
                    <td>{{album.publish_date}}</td>
                    <td>{{album.singer_name}}</td>
                    <td>
                        <a href="#/admin?page=albums&subPage=albumHandle&albumId={{album.id}}"><i class="fa fa-edit"></i></a>
                        <i class="fa fa-trash" ng-click="deleteAlumsById(album.id)"></i>
                    </td>
                </tr>
            </tbody>
        </table>
        <uib-pagination ng-if="pagination.totalItems>0" total-items="pagination.totalItems" ng-model="pagination.currPage"
                        max-size="pagination.maxSize" items-per-page="pagination.itemsPerPage" class="pagination-sm pull-right"
                        previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"
                        boundary-links="true" force-ellipses="true" ng-change="pageChanged(getAlbums)"></uib-pagination>
    </div>
</script>
<!--添加专辑模板 albumHandle.html-->
<script type="text/ng-template" id="albumHandle.html">
    <form class="form-horizontal clearfix albumHandle" data-ng-init="albumHandle()">
        <div class="form-group clearfix singerName">
            <label for="album-name" class="pull-left">专辑名：</label>
            <div class="input-group pull-left">
                <div class="input-group-addon"><i class="fa fa-user"></i></div>
                <input type="text" class="form-control" id="album-name" placeholder="专辑名" ng-model="albumInfo.album_name">
            </div>
        </div>
        <singer-select selected-singer-id="albumInfo.singer_id"></singer-select>
        <date-picker date="albumInfo.publish_date" label="出版日期"></date-picker>
        <div class="form-group">
            <label for="album-info">专辑简介：</label>
            <div>
                <textarea id="album-info" class="form-control" rows="6" cols="40" name="album-info"
                          placeholder="专辑简介" ng-model="albumInfo.album_info"></textarea>
            </div>
        </div>
        <button class="btn btn-primary" ng-click="saveAlbumInfo()">保存</button>
    </form>
</script>

<!-- songs.html -->
<script type="text/ng-template" id="songs.html">
    <div class="songs" ng-controller="SongCtrl">
        <nav class="title">歌曲列表</nav>
        <div class="songs-lists">
            <div class="clearfix edit-bars">
                <form class="navbar-form pull-left m-search" role="search">
                    <div class="form-group">
                        <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
                        <input type="text" class="form-control" placeholder="查找歌曲" ng-keypress="search($event)">
                    </div>
                </form>
                <button class="btn btn-danger btn-sm pull-right" ng-click="deleteAlumsById()">删除选中的歌曲</button>
            </div>
            <div class="item-table" ng-controller="PageTableCtrl">
                <table id="song-table" class="table table-condensed table-striped table-hover"
                       ng-init="getSongsByPage(pagination.currPage, pagination.itemsPerPage)">
                    <thead>
                    <tr>
                        <th>
                            <input type="checkbox" ng-click="toggleSelectAll('song-table')" ng-checked="isSelectAllModel">
                        </th>
                        <th>序号</th>
                        <th>音乐标题</th>
                        <th>歌手</th>
                        <th>专辑</th>
                        <th>出版时间</th>
                        <th>播放数</th>
                        <th>点赞数</th>
                        <th>操作</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="song in songs">
                        <td>
                            <input type="checkbox" name="item-check" ng-click="toggleSelect($event, song.id)">
                        </td>
                        <td>{{(pagination.currPage-1)*pagination.itemsPerPage + $index + 1}}</td>
                        <td class="name-td">{{song.song_name}}</td>
                        <td>{{song.singer_name}}</td>
                        <td>{{song.album_name}}</td>
                        <td>{{song.publish_date}}</td>
                        <td>{{song.listen_count}}</td>
                        <td>{{song.like_count}}</td>
                        <td>
                            <a href="#/admin?page=songs&subPage=songEdit&albumId={{song.id}}"><i class="fa fa-edit"></i></a>
                            <i class="fa fa-trash" ng-click="deleteAlumsById(song.id)"></i>
                        </td>
                    </tr>
                    </tbody>
                </table>
                <uib-pagination ng-if="pagination.totalItems>0" total-items="pagination.totalItems" ng-model="pagination.currPage"
                                max-size="pagination.maxSize" items-per-page="pagination.itemsPerPage" class="pagination-sm pull-right"
                                previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"
                                boundary-links="true" force-ellipses="true" ng-change="pageChanged(getAlbums)"></uib-pagination>
            </div>
        </div>
    </div>
</script>
<!-- songsList.html -->
<script type="text/ng-template" id="songList.html">
    Content of songs.html
</script>
<!-- songsEdit.html -->
<script type="text/ng-template" id="songEdit.html">
    Content of songs.html
</script>

<!-- uploadMusic.html -->
<script type="text/ng-template" id="uploadMusic.html">
    <div class="upload" ng-controller="UploadCtrl">
        <nav class="title">上传音乐</nav>
        <form class="upload-form">
            <singer-and-album-select selected-singer-id="singerId"></singer-and-album-select>
            <div class="upload-btns">
                <button type="button" class="btn btn-info btn-sm" ng-click="btnSelectFile()">
                    <i class="fa fa-files-o"></i>选择音乐文件
                </button>
                <button type="button" class="btn btn-success btn-sm" ng-click="btnUpload()">
                    <i class="fa fa-upload"></i>上传
                </button>
                <button type="button" class="btn btn-danger btn-sm" ng-click="btnClean()">
                    <i class="fa fa-trash"></i>删除全部
                </button>
            </div>
            <div class="form-group" hidden>
                <input type="file" id="upload-mp3" multiple/>
            </div>
            <div class="panel panel-default music-lists" ng-show="files.length>0">
                <div class="panel-heading">上传的曲目</div>
                <div class="panel-body">
                    <div class="music-list" ng-repeat="file in files">
                        <div class="music-list-info">
                            <span>{{$index}} {{file.name}} ({{file.size}})</span>
                            <i class="fa fa-minus-circle pull-right" title="删除" ng-click="btn_remove(file)"></i>
                        </div>
                        <uib-progressbar class="progress-striped" value="{{file.loaded}}" type="{{type}}"
                                         title="{{file.loaded}}"></uib-progressbar>
                    </div>
                </div>
            </div>
        </form>
    </div>
</script>

<!-- users.html -->
<script type="text/ng-template" id="users.html">
    Content of users.html
</script>

<!-- admins.html -->
<script type="text/ng-template" id="admins.html">
    Content of admins.html
</script>

<!-- supAdmins.html -->
<script type="text/ng-template" id="supAdmins.html">
    Content of supAdmins.html
</script>
